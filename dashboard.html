<!DOCTYPE html>
<html>
<head>
  <title>Dashboard - AMSA Mentorship</title>
  <meta charset="UTF-8" />
</head>
<body>

  <h1 id="welcome"></h1>
  <button id="logoutBtn">Logout</button>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
  import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBlwZDPWDZJ6P1cWnJZV_aIdy6MzR9EWKs",
  authDomain: "amsa-mentorship-program.firebaseapp.com",
  projectId: "amsa-mentorship-program",
  storageBucket: "amsa-mentorship-program.firebasestorage.app",
  messagingSenderId: "161964406332",
  appId: "1:161964406332:web:00618295ad3d6b9f03b539",
  measurementId: "G-JQSHGGTDRT"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  const welcome = document.getElementById("welcome");
  const logoutBtn = document.getElementById("logoutBtn");

  onAuthStateChanged(auth, async (user) => {
    if (!user) {
      window.location.href = "login.html";
      return;
    }

    const userDoc = await getDoc(doc(db, "users", user.uid));

    if (!userDoc.exists()) {
      window.location.href = "profile.html";
      return;
    }

    const userData = userDoc.data();
    welcome.innerText = "Welcome, " + userData.fullName;
  });

  logoutBtn.addEventListener("click", async () => {
    await signOut(auth);
    window.location.href = "login.html";
  });
</script>

</body>
</html>
